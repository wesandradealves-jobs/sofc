/**
 * Upload file controller
 * @constructor
 */
function UploadController() {
    var fs = require('fs'), contents = '';
    if (typeof this.instance.post.testfilesingle !== 'undefined') {
        contents = fs.readFileSync(this.instance.post.testfilesingle.path).toString();
    } else {
        for (var key in this.instance.post) {
            var pvar = this.instance.post[key];
            if (pvar instanceof Array) {
                for (var i = 0, max = pvar.length; i < max; i++) {
                    if (pvar[i].path) {
                        contents += fs.readFileSync(pvar[i].path);
                    } else {
                        contents += pvar[i];
                    }
                }
            } else if (typeof pvar === 'object') {
                if (pvar.path) {
                    contents += fs.readFileSync(pvar.path).toString();
                } else {
                    for (var ikey in pvar) {
                        if (pvar[ikey].path) {
                            contents += fs.readFileSync(pvar[ikey].path).toString();
                        } else {
                            contents += pvar[ikey];
                        }
                    }
                }
            } else {
                contents += pvar;
            }
        }
    }
    this.instance.end(null, contents);
}

/**
 * Export
 */
exports = module.exports = UploadController;


