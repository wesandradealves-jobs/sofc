/******************************************************************************
 * Lemonade JS
 * https://lemonadejs.com
 *
 * ----
 *
 * IncludeSwig
 *
 *  Return a compiled swig template, ready for parsing
 *
 *****************************************************************************/

/**
 * Load the template
 * @param {string} path
 * @returns {*}
 */
function include(path) {
    if (!init) {
        swig.init({});
        init = true;
    }
    var tpl = swig.compileFile(path);
    return function(vars) {
        return tpl.render(vars);
    };
}

/**
 * Clear template cache
 * @param {object} kernel
 */
function clearcache(kernel) {
    init = false;
    kernel.log(
        kernel.utility.ansi('green', 'ok') + ' - '
        + 'cleared template (swig) cache'
    );
}

/**
 * Dependencies
 */
var swig = require('swig')
,   init;

/**
 * Exports
 */
exports = module.exports = {
    include : include, clearcache : clearcache
};